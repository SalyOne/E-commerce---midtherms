"use strict";(self.webpackChunkE_commerce_midterms=self.webpackChunkE_commerce_midterms||[]).push([[396],{9396:(A,l,r)=>{r.r(l),r.d(l,{CartModule:()=>v});var a=r(6895),s=r(3128),d=r(7579),u=r(2722),t=r(8256),m=r(4128),g=r(4527);function p(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"th",11),t._UZ(2,"img",12),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td")(9,"span"),t._uU(10),t.qZA()(),t.TgZ(11,"td")(12,"button",13),t.NdJ("click",function(){const _=t.CHM(n).$implicit,y=t.oxw();return t.KtG(y.deleteCart(_.id))}),t._uU(13,"Delete"),t.qZA()()()}if(2&e){const n=c.$implicit;t.xp6(2),t.s9C("src",n.item.image,t.LSH),t.xp6(2),t.Oqu(n.item.name),t.xp6(2),t.Oqu(t.xi3(7,4,n.item.price,"USD")),t.xp6(4),t.Oqu(n.quantity)}}const C=function(){return["/products"]};function f(e,c){1&e&&(t.TgZ(0,"div",14)(1,"p"),t._uU(2," your cart is empty "),t.qZA(),t.TgZ(3,"small")(4,"a",15),t._uU(5," go to Product page to add products to cart"),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("routerLink",t.DdM(1,C)))}const h=function(){return["/orders"]};function b(e,c){1&e&&(t.TgZ(0,"div",14)(1,"p"),t._uU(2," your orders have been placed! "),t.qZA(),t.TgZ(3,"small")(4,"a",15),t._uU(5," go to Orders page to see placed orders"),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("routerLink",t.DdM(1,h)))}let Z=(()=>{class e{constructor(n,o,i){this.cartServ=n,this.orderServ=o,this.route=i,this.sub$=new d.x,this.cartItems=[],this.cartSum=0,this.isPlaced=!1}ngOnInit(){this.getAllCarts()}getAllCarts(){return this.cartServ.getCart().pipe((0,u.R)(this.sub$)).subscribe(n=>{this.cartItems=n,this.cartSum=this.cartItems.reduce((o,i)=>o+i.total,0)})}deleteCart(n){this.cartServ.deleteCartItem(n).pipe((0,u.R)(this.sub$)).subscribe(o=>{this.getAllCarts()})}checkout(){this.orderServ.addOrder().pipe((0,u.R)(this.sub$)).subscribe(()=>{this.getAllCarts(),this.isPlaced=!0})}ngOnDestroy(){this.sub$.next(null),this.sub$.complete()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.N),t.Y36(g.N),t.Y36(s.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cart"]],decls:27,vars:7,consts:[[1,"container","aaa"],[1,"table","cart-table"],["scope","col"],[4,"ngFor","ngForOf"],["class","message-box",4,"ngIf"],[1,"d-flex","justify-content-end","checkout-box"],[1,"d-flex","flex-column","justify-content-end",2,"width","300px"],[1,"list-group"],[1,"list-group-item"],[1,"mt-4","align-self-end"],[1,"btn","button-main",3,"click"],["scope","row"],["alt","product image",3,"src"],[1,"btn","btn-danger",3,"click"],[1,"message-box"],[3,"routerLink"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),t._uU(5,"image"),t.qZA(),t.TgZ(6,"th",2),t._uU(7,"Name"),t.qZA(),t.TgZ(8,"th",2),t._uU(9,"Price"),t.qZA(),t.TgZ(10,"th",2),t._uU(11,"Quantity"),t.qZA(),t.TgZ(12,"th",2),t._uU(13,"Buttons"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,p,14,7,"tr",3),t.qZA()(),t.YNc(16,f,6,2,"div",4),t.YNc(17,b,6,2,"div",4),t.TgZ(18,"div",5)(19,"div",6)(20,"ul",7)(21,"li",8),t._uU(22),t.ALo(23,"currency"),t.qZA()(),t.TgZ(24,"div",9)(25,"button",10),t.NdJ("click",function(){return o.checkout()}),t._uU(26,"Checkout"),t.qZA()()()()()),2&n&&(t.xp6(15),t.Q6J("ngForOf",o.cartItems),t.xp6(1),t.Q6J("ngIf",0===o.cartItems.length&&!o.isPlaced),t.xp6(1),t.Q6J("ngIf",o.isPlaced),t.xp6(5),t.hij("Total price: ",t.xi3(23,4,o.cartSum,"USD"),""))},dependencies:[a.sg,a.O5,s.yS,a.H9],styles:['.button-primary[_ngcontent-%COMP%]{background-color:#f48668;color:#fff}.button-main[_ngcontent-%COMP%]{background-color:#7d84b2;color:#fff}.cart-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-family:"Noto Serif NP Hmong",serif;text-transform:capitalize}.cart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .cart-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-family:Dosis,sans-serif;text-transform:capitalize;font-size:18px}.checkout-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-family:"Noto Serif NP Hmong",serif;text-transform:capitalize}img[_ngcontent-%COMP%]{width:90px}.message-box[_ngcontent-%COMP%]{font-family:"Noto Serif NP Hmong",serif;text-transform:capitalize;font-size:18px;text-align:center;padding:70px 0}.message-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f48668}.message-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#7d84b2}']}),e})();var x=r(8159),M=r(7539);const O=[{path:"",component:Z},{path:"orders",component:x.b},{path:"products",component:M.P}];let P=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.Bz.forChild(O),s.Bz]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.ez,P,s.Bz]}),e})()}}]);