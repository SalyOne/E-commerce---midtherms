"use strict";(self.webpackChunkE_commerce_midterms=self.webpackChunkE_commerce_midterms||[]).push([[913],{9913:(T,m,i)=>{i.r(m),i.d(m,{ProductsPanelModule:()=>x});var s=i(6895),l=i(3128),p=i(7579),a=i(2722),t=i(8256),f=i(5482);const P=function(o){return["/admin-panel/products-panel/edit",o]};function h(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",8),t._UZ(2,"img",9),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"button",10),t._uU(12,"Edit"),t.qZA(),t.TgZ(13,"button",11),t.NdJ("click",function(){const d=t.CHM(e).$implicit,M=t.oxw(2);return t.KtG(M.deleteProductItem(d.id))}),t._uU(14,"Delete"),t.qZA()()()}if(2&o){const e=r.$implicit;t.xp6(2),t.s9C("src",e.image,t.LSH),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(t.xi3(7,5,e.price,"USD")),t.xp6(3),t.Oqu(e.category.name),t.xp6(2),t.Q6J("routerLink",t.VKq(8,P,e.id))}}function b(o,r){if(1&o&&(t.ynx(0),t.YNc(1,h,15,10,"tr",7),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.products)}}let C=(()=>{class o{constructor(e){this.productsService=e,this.products=[],this.sub$=new p.x}ngOnInit(){this.getAllProducts()}getAllProducts(){this.productsService.getAllProd().pipe((0,a.R)(this.sub$)).subscribe(e=>{this.products=e})}deleteProductItem(e){this.productsService.deleteProduct(e).pipe((0,a.R)(this.sub$)).subscribe(c=>{this.getAllProducts()})}ngOnDestroy(){this.sub$.next(null),this.sub$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.s))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-products-panel"]],decls:22,vars:1,consts:[[1,"w-100","m-3","flex-fill"],[1,"d-flex","first-row","flex-fill","justify-content-between","align-items-center"],[1,"title"],["routerLink","/admin-panel/products-panel/add",1,"btn","button-main"],[1,"table","product-table","flex-fill"],["scope","col"],[4,"ngIf"],[4,"ngFor","ngForOf"],["scope","row"],["alt","product image",3,"src"],[1,"btn","button-primary",3,"routerLink"],[1,"btn","btn-danger",3,"click"]],template:function(e,c){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3," Products"),t.qZA(),t.TgZ(4,"div")(5,"button",3),t._uU(6,"Add"),t.qZA()()(),t.TgZ(7,"table",4)(8,"thead")(9,"tr")(10,"th",5),t._uU(11,"#"),t.qZA(),t.TgZ(12,"th",5),t._uU(13,"Title"),t.qZA(),t.TgZ(14,"th",5),t._uU(15,"Price"),t.qZA(),t.TgZ(16,"th",5),t._uU(17,"Categories"),t.qZA(),t.TgZ(18,"th",5),t._uU(19,"Actions"),t.qZA()()(),t.TgZ(20,"tbody"),t.YNc(21,b,2,1,"ng-container",6),t.qZA()()()),2&e&&(t.xp6(21),t.Q6J("ngIf",c.products))},dependencies:[s.sg,s.O5,l.rH,s.H9],styles:['.button-primary[_ngcontent-%COMP%]{background-color:#f48668;color:#fff}.button-main[_ngcontent-%COMP%]{background-color:#7d84b2;color:#fff}.product-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-family:"Noto Serif NP Hmong",serif;text-transform:capitalize}.product-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .product-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-family:Dosis,sans-serif;text-transform:capitalize;font-size:18px}.button-primary[_ngcontent-%COMP%]{margin-right:5px}.first-row[_ngcontent-%COMP%]{font-family:Dosis,sans-serif;text-transform:capitalize}.first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"Noto Serif NP Hmong",serif;font-size:22px}img[_ngcontent-%COMP%]{width:90px}']}),o})();var n=i(433),Z=i(3900),v=i(9646),A=i(8773);function _(o,r){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}let g=(()=>{class o{constructor(e,c,u,d){this.productsService=e,this.categoryService=c,this.router=u,this.route=d,this.form=new n.cw({id:new n.NI(null),name:new n.NI("",n.kI.required),description:new n.NI("",n.kI.required),image:new n.NI("",n.kI.required),price:new n.NI("",n.kI.required),categoryId:new n.NI("",n.kI.required)}),this.categories$=this.categoryService.getAllCat(),this.sub$=new p.x}ngOnInit(){this.route.params.pipe((0,Z.w)(e=>e.id?this.productsService.getOneProd(e.id):(0,v.of)(null))).subscribe(e=>{e&&this.form.patchValue({...e,categoryId:e.category.id})})}submit(){console.log("this.form.value"),console.log(this.form.value),console.log(this.form.invalid),this.form.markAllAsTouched(),!this.form.invalid&&(this.form.value.id?this.productsService.updateProd(this.form.value.id,this.form.value).pipe((0,a.R)(this.sub$)).subscribe(e=>{console.log(e),this.router.navigate(["admin-panel/products-panel"]).then(()=>{this.form.reset()})}):(console.log("Asdasdadsw"),this.productsService.addProduct(this.form.value).pipe((0,a.R)(this.sub$)).subscribe(e=>{console.log(e),this.router.navigate(["admin-panel/products-panel"]).then(()=>{this.form.reset()})})))}ngOnDestroy(){this.sub$.next(null),this.sub$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.s),t.Y36(A.G),t.Y36(l.F0),t.Y36(l.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-products-add-edit"]],decls:26,vars:4,consts:[[1,"container","m-3"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","placeholder","Title","formControlName","name",1,"form-control"],["aria-label","Default select example","formControlName","categoryId",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["for","price",1,"form-label"],["type","number","id","price","placeholder","Price","formControlName","price",1,"form-control"],["for","image",1,"form-label"],["type","text","id","image","placeholder","Image","formControlName","image",1,"form-control"],["for","description",1,"form-label"],["id","description","rows","3","formControlName","description",1,"form-control"],["type","submit",1,"btn","button-main"],[3,"value"]],template:function(e,c){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return c.submit()}),t.TgZ(2,"div",2)(3,"label",3),t._uU(4,"Title"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",2)(7,"label",3),t._uU(8,"Category"),t.qZA(),t.TgZ(9,"select",5),t.YNc(10,_,2,2,"option",6),t.ALo(11,"async"),t.qZA()(),t.TgZ(12,"div",2)(13,"label",7),t._uU(14,"Price"),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"div",2)(17,"label",9),t._uU(18,"Image"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"div",2)(21,"label",11),t._uU(22,"Description"),t.qZA(),t._UZ(23,"textarea",12),t.qZA(),t.TgZ(24,"button",13),t._uU(25,"Submit"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",c.form),t.xp6(9),t.Q6J("ngForOf",t.lcZ(11,2,c.categories$)))},dependencies:[s.sg,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.JL,n.sg,n.u,s.Ov],styles:['.button-primary[_ngcontent-%COMP%]{background-color:#f48668;color:#fff}.button-main[_ngcontent-%COMP%]{background-color:#7d84b2;color:#fff}label[_ngcontent-%COMP%]{font-family:"Noto Serif NP Hmong",serif}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-family:Dosis,sans-serif;text-transform:capitalize}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{text-transform:capitalize}']}),o})();const y=[{path:"",component:C},{path:"add",component:g},{path:"edit/:id",component:g}];let O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(y),l.Bz]}),o})(),x=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[s.ez,O,n.UX,l.Bz]}),o})()}}]);